services:
  frontend:
    ports:
      - "5173:5173"
    build:
      context: ./src/frontend
      dockerfile: ../../Frontend.Dockerfile
  data-providing-middleware:
    ports:
      - "8001:8001"
    build:
      context: .
      dockerfile: DataRetrieval.Dockerfile
    environment:
      PATH_TO_DATA_FILES: ../../../data/
      ES_URL: $ES_URL
      ES_INDEX: $ES_INDEX
      ES_USERNAME: $ES_USERNAME
      ES_PASSWD: $ES_PASSWD
  data-collecting-middleware:
    ports:
      - "8002:8002"
    build:
      context: ./src/middleware
      dockerfile: ../../DataCollection.Dockerfile
    environment:
      BEARER_TOKEN: $BEARER_TOKEN
      ES_URL: $ES_URL
      ES_INDEX: $ES_INDEX
      ES_USERNAME: $ES_USERNAME
      ES_PASSWD: $ES_PASSWD
  tweet-generation-middleware:
    ports:
      - "8003:8003"
    build:
      context: .
      dockerfile: TweetGeneration.Dockerfile
    environment:
      PATH_TO_DATA_FILES: ../../../data/
      BEARER_TOKEN: $BEARER_TOKEN
      ES_URL: $ES_URL
      ES_INDEX: $ES_INDEX
      ES_USERNAME: $ES_USERNAME
      ES_PASSWD: $ES_PASSWD